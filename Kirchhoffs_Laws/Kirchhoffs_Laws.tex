\newif\ifsolutions
\solutionstrue % Show solutions
%\solutionsfalse % Hide solutions

\documentclass{article}
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{tikz}
\usepackage{amssymb}

% fleqn allows setting indent of display math
\usepackage[fleqn]{amsmath}
\setlength{\mathindent}{0pt} % Set indent
% Disable equation numbering (https://tex.stackexchange.com/a/360378)
\makeatletter
\renewcommand\tagform@[1]{}
\makeatother

% Allow Unicode (some, e.g., © and £ at least)
% https://tex.stackexchange.com/questions/370278/is-there-any-reason-to-use-inputenc
\usepackage[utf8]{inputenc}

% Hyperlinks
\usepackage{hyperref}
\hypersetup{colorlinks=true, urlcolor=blue, linkcolor=blue}

% Prevent indentation of paragraphs
\setlength\parindent{0pt}
\setlength{\parskip}{\baselineskip}

% Spacing above/below equations
% https://tex.stackexchange.com/a/69678
\AtBeginDocument{%
 \abovedisplayskip=-\parskip
 \abovedisplayshortskip=-\parskip
 \belowdisplayskip=0pt
 \belowdisplayshortskip=0pt
}

% Allow 3 additional subsection levels
% https://tex.stackexchange.com/a/60212
\usepackage{titlesec}
\setcounter{secnumdepth}{6}
% H4 in HTML
\titleformat{\paragraph}{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
% H5 in HTML
\titleformat{\subparagraph}{\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}
\titlespacing*{\subparagraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
% H6 in HTML
\titleformat{\subsubparagraph}{\normalfont\normalsize\bfseries}{\thesubsubparagraph}{1em}{}
\titlespacing*{\subsubparagraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

% So enumerate at all levels is numbers
% https://tex.stackexchange.com/questions/78842/nested-enumeration-numbering
\renewcommand{\labelenumii}{\arabic{enumii}.}
\renewcommand{\labelenumiii}{\arabic{enumiii}.}
\renewcommand{\labelenumiv}{\arabic{enumiv}.}

\renewcommand{\mbox}{\text}
\newcommand{\ds}[0]{\displaystyle}
\newcommand{\ihat}[0]{\hat{\boldsymbol{\imath}}}
\newcommand{\jhat}[0]{\hat{\boldsymbol{\jmath}}}
\newcommand{\khat}[0]{\hat{\boldsymbol{k}}}
\newcommand{\xhat}[0]{\hat{\mathbf{x}}}
\newcommand{\yhat}[0]{\hat{\mathbf{y}}}
\newcommand{\zhat}[0]{\hat{\mathbf{z}}}
\newcommand{\rhat}[0]{\hat{\mathbf{r}}}
\newcommand{\bfvec}[1]{\vec{\mathbf{#1}}}
\newcommand{\bfcdot}[0]{\boldsymbol{\cdot}}

\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{Kirchhoff's Circuit Laws}
\rhead{\thepage}
\fancyfoot{}

\begin{document}

\section{Introduction}

To find the current through each resistor in a circuit with only resistors and batteries, Kirchhoff's Current Law and Kirchhoff's Voltage Law can be used.

\begin{enumerate}

  \item Kirchhoff's Current Law (KCL): The sum of all currents entering and exiting a junction is zero. Or, equivalently, the current flowing into a junction is equal to the current flowing out of a junction.

  \item Kirchhoff's Voltage Law (KVL): The sum of all voltage changes around a closed loop is zero.

\end{enumerate}

\textbf{General procedure}

To find the values of currents in a circuit, 

\begin{enumerate}

  \item assume directions of current,

  \item write equations for KCL for junctions,

  \item write equations for KVL for loops, and

  \item solve for currents. If you get a negative value for a current, the actual direction of current flow is opposite to what you assumed in 1.

\end{enumerate}

To apply KVL, draw a closed loop and choose a direction to step around the loop. 

\begin{enumerate}

  \item If stepping around the loop requires a step across a battery with emf $\mathcal{E}$ and the $-$ side is encountered first, the voltage change is $+\mathcal{E}$. If the $+$ side is encountered first, the voltage change is $-\mathcal{E}$. \emph{The direction of current through the battery does not matter.}

  \item If stepping around the loop requires a step across a resistor $R$ and the direction of current $I$ through the resistor is the same as the step direction, the voltage change is $-IR$. If the current is opposite the step direction, the voltage change is $+IR$.

\end{enumerate}

A common error is to assume every loop equation requires an emf.

\textbf{Note on Equivalent Resistances}

You may have already had experience solving for currents in circuits using equivalent resistances. In this activity, do not use equivalent resistances unless asked. The motivation is that you will better understand their interpretation and derivation after solving for currents without using equivalent resistances.

\ifsolutions

\else

\newpage
\fi

\section{Single Loop}

Only KVL is needed to find the current in a single-loop circuit.

\begin{enumerate}

  \item The direction of the unknown current $I$ in the following circuit is assumed to be counterclockwise. Write the equation for KVL by stepping around the loop counterclockwise; then solve for $I$ in terms of $\mathcal{E}$ and $R$.

        \input{figures/Single_Loop_CCW.tikz}

        \ifsolutions
        \textbf{Answer:} $\mathcal{E}-IR-IR=0 \quad \Rightarrow \quad I=\mathcal{E}/2R$
        \fi

  \item The direction of current $I$ in the following circuit was assumed to be clockwise. Write the equation for KVL stepping around the loop counterclockwise; then solve for $I$ in terms of $\mathcal{E}$ and $R$.

        \input{figures/Single_Loop_CW.tikz}

        \ifsolutions
        \textbf{Answer:} $\mathcal{E}+IR+IR=0 \quad \Rightarrow \quad I=-\mathcal{E}/2R$
        \fi

  \item Which value for $I$ found above is correct?

        \ifsolutions
        \textbf{Answer}: Both are correct and consistent. A negative current is equivalent to a positive current in the opposite direction. (You may recall from mechanics that when solving static equilibrium problems, you assume a direction for an unknown force $F$ on an object in a free-body diagram, sum all of the forces on it, and then solve for the unknown force. If the solution gives a negative $F$, you assumed the wrong direction for $F$.)
        \else
        \vskip 36pt
        \fi

  \item In part 1., a counterclockwise current was assumed, and you stepped in the counterclockwise direction. If you stepped clockwise, would your answer for $I$ be different?

        \ifsolutions
        \textbf{Answer}: Answer same. KVL is $-\mathcal{E}+IR+IR=0 \quad \Rightarrow \quad I=\mathcal{E}/2R$
        \else
        \vskip 36pt
        \fi

  \item For the circuit in part 1., if you replace the bottom resistor with a wire and replace the top resistor with a resistor with resistance $2R$, the following circuit results. What is the current $I$ for this circuit?

        \input{figures/Single_Loop_Equiv.tikz}

        \ifsolutions
        \textbf{Answer}: $I=\mathcal{E}/2R$ in counterclockwise direction. The fact that the answer here is the same as in 1. is related to the formula for the equivalent resistance of resistors in series: $R_{\text{eq}}=R_1+R_2$. Two resistors are in series if only one current path exists between them.
        \fi

\end{enumerate}

\ifsolutions

\else

\newpage
\fi

\section{Multiple Loops I}

\input{figures/Parallel.tikz}

\begin{enumerate}

  \item Use KCL at junction $X$ and KVL for loops $A$ and $B$ to show that $I_o=\mathcal{E}\left(\frac{1}{R_1}+\frac{1}{R_2}\right)$.

        \ifsolutions
        \textbf{Answer}:

        KVL for $A$: $+\mathcal{E}-I_1R_1=0\quad\Rightarrow\quad I_1=\mathcal{E}/R_1$

        KVL for $B$: $+I_1R_1-I_2R_2=0 \quad\Rightarrow\quad I_2 = I_1 R_1/R_2 = \mathcal{E}/R_2$

        KCL at $X$: $I_o=I_1+I_2 = \mathcal{E}/R_1 + \mathcal{E}/R_2 = \mathcal{E}\left(\frac{1}{R_1}+\frac{1}{R_2}\right)$
        \else
        \vskip 120pt
        \fi

\end{enumerate}

\begin{enumerate}

  \item[2.] If $R_2 > R_1$, which resistor will have more current?

            \ifsolutions
            \textbf{Answer}:

            $$\frac{I_2}{I_1} = \frac{R_1}{R_2} \quad \Rightarrow \quad I_2 < I_1$$ 

            One can also use the water flow analogy. If $R_2$ resists flow more than $R_1$, there will be less flow through $R_2$.
            \else
            \vskip 60pt
            \fi

  \item[3.] If $R_1 \rightarrow 0$, what happens to $I_o$, $I_1$, and $I_2$?

            \ifsolutions
            \textbf{Answer}: $I_o \rightarrow \infty$, $I_1 \rightarrow \infty$, and $I_2\rightarrow 0$. In this case, we say that resistor $R_2$ is ``shorted" because little current flows through it relative to $R_1$.
            \else

            \newpage
            \fi

\end{enumerate}

%4. Suppose the two resistors were replaced with a resistor with a resistance of $1/\left(\frac{1}{R_1}+\frac{1}{R_2}\right)$ as shown below. What is $I_o$?

\section{Multiple Loops II}

Assume the direction of currents $I_1$, $I_2$, and $I_3$ in the following circuit are as shown.

\input{figures/Multiple_Loops_I.tikz}

\begin{enumerate}

  \item Write the equation for KVL for loop $A$.

        \ifsolutions
        \textbf{Answer}: $+\mathcal{E}-I_1R-I_3R=0$
        \else
        \vskip 36pt
        \fi

  \item Write the equation for KVL for loop $B$.

        \ifsolutions
        \textbf{Answer}: $I_3R-I_2R=0$. A common error is to attempt to include $\mathcal{E}$ in this equation. When using KVL, the only elements that appear in the equation are elements that are stepped across when going around the chosen loop.
        \else
        \vskip 36pt
        \fi

  \item Write the equation for KCL for junction X.

        \ifsolutions
        \textbf{Answer}: $I_3+I_2=I_1$
        \else
        \vskip 36pt
        \fi

  \item Use the three equations found above to solve for the three unknowns, $I_1$, $I_2$, and $I_3$ in terms of $\mathcal{E}$ and $R$.

        \ifsolutions
        \textbf{Answer}:

        Eqn 1: $+\mathcal{E}-I_1R-I_3R=0$

        Eqn 2: $I_3R-I_2R=0$

        Eqn 3: $I_3+I_2=I_1$

        From Eqn 2., $I_2=I_3$ (this is expected, why?). Sub this into Eqn. 3 to get $I_3=I_1/2$. Plug this into Eqn 1. to get $I_1=(2/3)(\mathcal{E}/R)$. Additional substitution gives $I_2=I_3=(1/3)(\mathcal{E}/R)$.
        \else
        \vskip 96pt
        \fi

  \item Check your answers by plugging your values for $I_1$, $I_2$, and $I_3$ into the equations that you wrote for parts 1.-3.

        \ifsolutions
        \textbf{Comment}: This is an important step. Sign errors in KVL and KCL are common, as are algebraic errors, and this check will determine if you made an error.
        \else

        \newpage
        \fi

\end{enumerate}

\section{Multiple Loops II}

In the circuit for the previous problem, there are three possible loops. The third loop is loop $C$, which is indicated below.

\input{figures/Multiple_Loops_II.tikz}

\begin{enumerate}

  \item Write the equation for KVL for loop $C$.

        \ifsolutions
        \textbf{Answer}: $\mathcal{E}-I_1R-I_2R=0$
        \else
        \vskip 36pt
        \fi

  \item Use the equation for KVL for loop $B$ and the KCL equation for junction $X$ along with the KVL equation for loop $C$ to find $I_1$, $I_2$, and $I_3$ in terms of $\mathcal{E}$ and $R$. (You should get the same answers as the previous problem.)

\end{enumerate}

\ifsolutions

\else

\newpage
\fi

\section{Redundant Equations}

When solving circuit problems with multiple loops, you will generally find that you can use KVL and KCL to write more equations than there are unknown currents. If you attempt to solve a problem with $N$ unknowns by writing $N$ equations based on KVL and KCL but cannot solve for the unknowns, the reason is that two or more of the equations that you wrote were not independent. To demonstrate this, for the following circuit,

\input{figures/Multiple_Loops_III.tikz}

\begin{enumerate}

  \item write the KCL equation for junction X,

        \ifsolutions
        \textbf{Answer}: $-I_1+I_2+I_3$
        \else
        \vskip 36pt
        \fi

  \item write the KCL equation for junction Y,

        \ifsolutions
        \textbf{Answer}: $+I_1-I_2-I_3=0$
        \else
        \vskip 36pt
        \fi

  \item write the KVL equation for loop $A$, and

        \ifsolutions
        \textbf{Answer}: $+\mathcal{E}-I_1R-I_3R=0$
        \else
        \vskip 36pt
        \fi

  \item Is it possible to use the above three equations to solve for $I_1$, $I_2$, and $I_3$ in terms of $\mathcal{E}$ and $R$? If yes, do it. If no, explain why.

        \ifsolutions
        \textbf{Answer}: No. The equation for junction $X$ can be turned into the equation for junction $Y$ by multiplying all terms in it by $-1$. Thus, the equations are not independent. Given that three independent equations are needed to solve for three unknowns, a solution is impossible with the equations requested in parts 1.--3.
        \fi

\end{enumerate}

\end{document}